# Бэкенд

## Переменные окружения

Для защищённой локальной разработки и сборки итогового приложения необходимо создать файл с переменными окружения - .env-файл. В репозитории есть пример такого файла, но ни в коем случае он не должен попадать в итоговую сборку или на хостинг системы контроля версий! Терминальная команда для копирования файла переменных окружения для локальной разработки представлена ниже:

```bash
cp .env.example .env
```

## GitHub Actions

GitHub Actions - это платформа непрерывной интеграции и доставки (CI/CD), которая позволяет автоматизировать рабочие процессы разработки программного обеспечения непосредственно в репозитории GitHub. С помощью GitHub Actions вы можете строить, тестировать и развертывать свой код прямо из GitHub.

### Основные понятия GitHub Actions

- **Workflow (рабочий процесс)**: Автоматизированная процедура, состоящая из одного или нескольких заданий, определенных в YAML-файле в каталоге `.github/workflows` вашего репозитория.
- **Event (событие)**: Триггер, который запускает рабочий процесс, например, отправка кода в репозиторий или создание запроса на вытягивание.
- **Job (задание)**: Набор шагов, которые выполняются на одном раннере, позволяя группировать несколько шагов вместе.
- **Action (действие)**: Отдельные задачи, которые объединяются в шаги для выполнения конкретной функции.
- **Runner (раннер)**: Серверы, на которых выполняются ваши рабочие процессы при их запуске событиями.

### GitHub Secrets и Variables

GitHub предоставляет безопасные способы хранения чувствительных данных и конфигурационных значений в вашем репозитории:

- **Secrets (секреты)**: Зашифрованные переменные окружения для хранения конфиденциальной информации, такой как API-ключи, пароли или токены. Они доступны только для GitHub Actions во время выполнения рабочих процессов.
- **Variables (переменные)**: Не зашифрованные значения конфигурации, которые можно использовать в ваших рабочих процессах. Они не зашифрованы и видны в логах ваших рабочих процессов.
- **Environments (окружения)**: Именованные окружения, такие как "Production" или "Staging", которые могут иметь свои собственные секреты и правила защиты, как используется в данном проекте с окружением "Production".

### Создвать SSH-ключи для GitHub Actions

1. Используйте следующую команду в терминале (на Linux, macOS или в Git Bash на Windows):

```bash
ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/github_deploy_key
```

1. Когда спросят пароль, просто нажмите Enter (оставьте пустым). Для автоматического деплоя через GitHub Actions ключ должен быть без пароля, иначе скрипт «зависнет», ожидая ввода.
2. Для **GitHub**: Скопируйте содержимое приватного ключа:

```bash
cat ~/.ssh/github_deploy_key
```

Вставьте его под именем SSH_PRIVATE_KEY.

1. Для **сервера** - скопируйте содержимое публичного ключа:

```bash
cat ~/.ssh/github_deploy_key.pub
```

Добавьте эту строку в файл `~/.ssh/authorized_keys` на вашем **сервере**.
